{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/landing.css' %}">
{% endblock %}

{% block main_style %}min-height: calc(100vh - 70px);{% endblock %}

{% block full_width_content %}
    <div id="initial-loader">
        <div class="loader-spinner"></div>
    </div>

    {% include 'core/partials/landing/hero.html' %}
    
    {% include 'core/partials/landing/benefits.html' %}
    
    {% include 'core/partials/landing/blog_preview.html' %}
    
    {% include 'core/partials/landing/power_player.html' %}
{% endblock %}

{% block extra_js %}
<script>
    const hideLoader = () => {
        const loader = document.getElementById('initial-loader');
        if (loader && !loader.classList.contains('hidden')) {
            loader.classList.add('hidden');
            setTimeout(() => loader.remove(), 500);
        }
    };

    // Auth State Observer - Reuse existing auth listener from base but add loader logic
    // Actually base.html has its own auth listener.
    // We can hook into the existing one or just add a separate one for the loader.
    // The original landing.html had logic to reload if token sync was needed.
    // base.html already handles token sync.
    // So we just need to hide loader when auth is determined.
    
    firebase.auth().onAuthStateChanged((user) => {
        // We can just hide loader immediately or wait for base logic.
        // Let's just hide it when we get a user or not.
        hideLoader();
    });

    // Safety timeout
    setTimeout(hideLoader, 5000);
</script>
{% endblock %}