{% extends 'base.html' %}

{% block content %}
<div style="background: #f8fafc; padding-bottom: 4rem;">
    <!-- Header Section -->
    <div class="container" style="padding-top: 4rem; padding-bottom: 2rem;">
        <div style="display: flex; align-items: center; gap: 2rem; flex-wrap: wrap;">
            <div
                style="width: 150px; height: 150px; background: #fce7f3; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 4rem; flex-shrink: 0;">
                {% if 'fashion' in personality.id %}ğŸ‘—{% elif 'travel' in personality.id %}âœˆï¸{% elif 'student' in
                personality.id %}ğŸ“{% else %}ğŸ§™â€â™‚ï¸{% endif %}
            </div>
            <div style="flex: 1; min-width: 250px;">
                <span class="badge badge-primary" style="margin-bottom: 0.5rem;">{{ personality.tagline|default:"The Archetype" }}</span>
                <h1 style="font-size: clamp(2rem, 5vw, 3.5rem); margin-bottom: 1rem; line-height: 1;">{{ personality.name }}</h1>
                <p style="font-size: 1.25rem; max-width: 700px; color: var(--text-main);">
                    {{ personality.description }}
                </p>
            </div>
        </div>
    </div>

    <!-- Recommended Setup -->
    <div class="container">
        <h2 style="margin-bottom: 2rem;">Recommended Cards</h2>
        <div style="display: flex; flex-direction: column; gap: 1.5rem;">
            {% for card in recommended_cards %}
            <div class="card personality-card-item"
                style="display: grid; grid-template-columns: 200px 1fr auto; gap: 2rem; align-items: center;">
                <!-- Left: Image -->
                <div style="text-align: center;">
                    <div
                        style="background: #f1f5f9; height: 120px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                        {% if card.image_url %}
                        <img src="{{ card.image_url }}" alt="{{ card.name }}"
                            style="max-width: 100%; max-height: 100%;">
                        {% else %}
                        <span style="font-size: 2rem;">ğŸ’³</span>
                        {% endif %}
                    </div>
                </div>

                <!-- Middle: Content -->
                <div>
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <span class="badge badge-dark">{{ card.issuer }}</span>
                    </div>
                    <h3 style="margin-bottom: 0.5rem;"><a href="{% url 'card_detail' card.id %}">{{ card.name }}</a>
                    </h3>
                    <p style="font-size: 0.9rem; margin-bottom: 1rem;">
                        Credit Score: <strong>Good-Excellent (690+)</strong>
                    </p>
                    <p style="color: var(--text-muted);">{{ card.description|truncatewords:20 }}</p>

                    <!-- Benefits Preview -->
                    {% if card.benefits %}
                    <div style="background: #eff6ff; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <h5
                            style="font-size: 0.85rem; text-transform: uppercase; color: var(--primary); margin-bottom: 0.5rem;">
                            ğŸ Notable Benefits</h5>
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
                            {% for benefit in card.benefits|slice:":4" %}
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--primary);">âœ“</span> {{ benefit.name }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>

                <!-- Right: Action -->
                <div style="text-align: right; min-width: 150px;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--dark); margin-bottom: 0.25rem;">
                        ${{ card.annual_fee }}<span
                            style="font-size: 0.9rem; color: var(--text-muted); font-weight: 400;">/yr</span>
                    </div>
                    <a href="{% url 'card_detail' card.id %}" class="btn btn-dark" style="width: 100%;">Apply Now â†—</a>
                </div>
            </div>
            {% empty %}
            <p>No recommended cards found for this personality.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}