{% extends 'base.html' %}

{% block content %}
<!-- Personalities Header with Quiz -->
<section style="background: linear-gradient(135deg, #1E293B 0%, #0F172A 100%); padding: 4rem 0; text-align: center; color: white; position: relative; overflow: hidden;">
    <!-- Background decoration -->
    <div style="position: absolute; top: -100px; right: -100px; width: 300px; height: 300px; background: rgba(124, 58, 237, 0.1); border-radius: 50%; filter: blur(80px);"></div>
    <div style="position: absolute; bottom: -100px; left: -100px; width: 300px; height: 300px; background: rgba(99, 102, 241, 0.1); border-radius: 50%; filter: blur(80px);"></div>
    
    <div class="container" style="position: relative; z-index: 1;">
        <!-- Badge -->
        <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 999px; margin-bottom: 1.5rem; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);">
            <span style="font-size: 1.1rem;">‚ú®</span>
            <span style="font-size: 0.75rem; font-weight: 600; letter-spacing: 0.1em;">Discover Your Financial DNA</span>
        </div>
        
        <!-- Title -->
        <h1 style="font-size: clamp(2.5rem, 5vw, 3.5rem); font-weight: 700; margin-bottom: 1rem; line-height: 1.2;">
            What's your <span style="background: linear-gradient(135deg, #A78BFA 0%, #C084FC 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Wallet Vibe?</span>
        </h1>
        
        <!-- Subtitle -->
        <p style="font-size: 1.125rem; color: #94A3B8; max-width: 600px; margin: 0 auto 3rem;">
            Click the statement that sounds most like you.
        </p>

        <!-- Quiz Option Cards -->
        <div style="max-width: 900px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem;">
            <!-- Card 1 -->
            <a href="{% url 'quiz' %}" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 1.5rem; text-decoration: none; color: white; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; gap: 0.75rem; backdrop-filter: blur(10px);" class="quiz-card">
                <span style="font-size: 2rem;">‚úàÔ∏è</span>
                <p style="font-size: 0.875rem; font-weight: 600; margin: 0; line-height: 1.4; text-align: center;">I live for free flights & lounges.</p>
            </a>
            
            <!-- Card 2 -->
            <a href="{% url 'quiz' %}" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 1.5rem; text-decoration: none; color: white; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; gap: 0.75rem; backdrop-filter: blur(10px);" class="quiz-card">
                <span style="font-size: 2rem;">üíµ</span>
                <p style="font-size: 0.875rem; font-weight: 600; margin: 0; line-height: 1.4; text-align: center;">Cash is king. Fees are evil.</p>
            </a>
            
            <!-- Card 3 -->
            <a href="{% url 'quiz' %}" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 1.5rem; text-decoration: none; color: white; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; gap: 0.75rem; backdrop-filter: blur(10px);" class="quiz-card">
                <span style="font-size: 2rem;">üçΩÔ∏è</span>
                <p style="font-size: 0.875rem; font-weight: 600; margin: 0; line-height: 1.4; text-align: center;">Dining out & VIP events.</p>
            </a>
            
            <!-- Card 4 -->
            <a href="{% url 'quiz' %}" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 1.5rem; text-decoration: none; color: white; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; gap: 0.75rem; backdrop-filter: blur(10px);" class="quiz-card">
                <span style="font-size: 2rem;">üìä</span>
                <p style="font-size: 0.875rem; font-weight: 600; margin: 0; line-height: 1.4; text-align: center;">Maximize ROI. Optimize everything.</p>
            </a>
            
            <!-- Card 5 - Highlighted -->
            <a href="{% url 'quiz' %}" style="background: linear-gradient(135deg, #7C3AED 0%, #6366F1 100%); border: 1px solid rgba(167, 139, 250, 0.3); border-radius: 16px; padding: 1.5rem; text-decoration: none; color: white; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; gap: 0.75rem; box-shadow: 0 8px 20px rgba(124, 58, 237, 0.3);" class="quiz-card quiz-card-highlight">
                <span style="font-size: 2rem;">‚ö°</span>
                <p style="font-size: 0.875rem; font-weight: 600; margin: 0; line-height: 1.4; text-align: center;">I have a spreadsheet for everything.</p>
            </a>
        </div>
    </div>
</section>

<style>
    .quiz-card:hover {
        background: rgba(255,255,255,0.1) !important;
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .quiz-card-highlight:hover {
        background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%) !important;
        box-shadow: 0 12px 24px rgba(124, 58, 237, 0.4) !important;
    }
</style>

<!-- Personalities Grid -->
<section class="container" style="padding: 4rem 0;">
    <div style="display: flex; flex-direction: column; gap: 2rem;" id="personalities-grid">
        {% for personality in personalities %}
        <a href="{% url 'personality_detail' personality.id %}" class="personality-card-link"
            style="text-decoration: none; color:inherit;" data-name="{{ personality.name|lower }}"
            data-desc="{{ personality.description|lower }}" data-tag="{{ personality.tagline|default:''|lower }}">
            <div style="background: white; border-radius: 20px; padding: 2.5rem; border: 1px solid #E5E7EB; box-shadow: 0 2px 8px rgba(0,0,0,0.04); transition: all 0.3s; display: grid; grid-template-columns: auto 1fr auto; gap: 2rem; align-items: center;" class="personality-card">
                <!-- Left: Avatar -->
                <div style="width: 100px; height: 100px; background: linear-gradient(135deg, {% if 'jetsetter' in personality.id|lower %}#06B6D4{% elif 'freak' in personality.id|lower or 'wallet freak' in personality.name|lower %}#A855F7{% elif 'minimalist' in personality.id|lower or 'hunter' in personality.id|lower %}#10B981{% else %}#F59E0B{% endif %} 0%, {% if 'jetsetter' in personality.id|lower %}#0EA5E9{% elif 'freak' in personality.id|lower or 'wallet freak' in personality.name|lower %}#9333EA{% elif 'minimalist' in personality.id|lower or 'hunter' in personality.id|lower %}#059669{% else %}#D97706{% endif %} 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); flex-shrink: 0;">
                    {% if 'jetsetter' in personality.id|lower %}‚úàÔ∏è
                    {% elif 'freak' in personality.id|lower or 'wallet freak' in personality.name|lower %}ü§ì
                    {% elif 'minimalist' in personality.id|lower %}üíµ
                    {% elif 'foodie' in personality.id|lower %}üçΩÔ∏è
                    {% elif 'hunter' in personality.id|lower %}üéØ
                    {% elif 'strategist' in personality.id|lower or 'optimizer' in personality.id|lower %}üìä
                    {% else %}üí≥{% endif %}
                </div>

                <!-- Middle: Info -->
                <div style="min-width: 0;">
                    <!-- Label -->
                    <div style="font-size: 0.75rem; color: #9CA3AF; font-weight: 600; letter-spacing: 0.1em; margin-bottom: 0.5rem; text-transform: uppercase;">
                        RECOMMENDED STACK
                    </div>
                    
                    <!-- Name -->
                    <h3 style="font-size: 1.75rem; font-weight: 700; margin: 0 0 0.75rem 0; color: #1F2937;">
                        {{ personality.name }}
                    </h3>

                    <!-- Description -->
                    <p style="color: #64748B; line-height: 1.6; margin: 0 0 1rem 0; font-size: 0.9375rem;">
                        {{ personality.description|truncatewords:25 }}
                    </p>

                    <!-- Tags -->
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        {% if personality.tagline %}
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px; text-transform: uppercase; letter-spacing: 0.05em;">
                            #{{ personality.tagline|upper|truncatewords:2 }}
                        </span>
                        {% endif %}
                        <!-- Additional context tags based on personality type -->
                        {% if 'jetsetter' in personality.id|lower %}
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px;">#TRAVEL</span>
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px;">#FLY</span>
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px;">#PLANE</span>
                        {% elif 'freak' in personality.id|lower or 'wallet freak' in personality.name|lower %}
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px;">#CHURNING</span>
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px;">#MAXIMUM</span>
                        {% elif 'hunter' in personality.id|lower %}
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px;">#CASHBACK</span>
                        <span style="background: #F3F4F6; color: #6366F1; font-size: 0.75rem; font-weight: 600; padding: 0.375rem 0.75rem; border-radius: 6px;">#NOFEE</span>
                        {% endif %}
                    </div>
                </div>

                <!-- Right: Card Stack -->
                <div style="position: relative; width: 280px; height: 200px; flex-shrink: 0;">
                    <!-- Card 1 (Back) - Amex/Gray -->
                    <div style="position: absolute; top: 0; left: 0; width: 240px; height: 150px; background: linear-gradient(135deg, #8B9BA7 0%, #6B7B88 100%); border-radius: 12px; box-shadow: 0 8px 16px rgba(0,0,0,0.15); transform: rotate(-8deg); z-index: 1;">
                        <div style="padding: 1rem; display: flex; flex-direction: column; justify-content: space-between; height: 100%; color: white;">
                            <div style="font-size: 0.7rem; font-weight: 600; letter-spacing: 0.1em;">AMEX</div>
                            <div style="font-size: 0.9rem; letter-spacing: 0.1em;">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 1323</div>
                            <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                                <div style="font-size: 0.7rem;">YOUR NAME</div>
                                <div style="display: flex; gap: 2px;">
                                    <div style="width: 14px; height: 14px; background: #EB001B; border-radius: 50%;"></div>
                                    <div style="width: 14px; height: 14px; background: #F79E1B; border-radius: 50%; margin-left: -6px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 2 (Middle) - Chase Blue -->
                    <div style="position: absolute; top: 20px; left: 30px; width: 240px; height: 150px; background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%); border-radius: 12px; box-shadow: 0 8px 16px rgba(0,0,0,0.15); transform: rotate(-4deg); z-index: 2;">
                        <div style="padding: 1rem; display: flex; flex-direction: column; justify-content: space-between; height: 100%; color: white;">
                            <div style="font-size: 0.7rem; font-weight: 600; letter-spacing: 0.1em;">CHASE</div>
                            <div style="font-size: 0.9rem; letter-spacing: 0.1em;">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4242</div>
                            <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                                <div style="font-size: 0.7rem;">YOUR NAME</div>
                                <div style="display: flex; gap: 2px;">
                                    <div style="width: 14px; height: 14px; background: #EB001B; border-radius: 50%;"></div>
                                    <div style="width: 14px; height: 14px; background: #F79E1B; border-radius: 50%; margin-left: -6px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 3 (Front) - Capital One Dark -->
                    <div style="position: absolute; top: 40px; left: 60px; width: 240px; height: 150px; background: linear-gradient(135deg, #1E293B 0%, #0F172A 100%); border-radius: 12px; box-shadow: 0 12px 24px rgba(0,0,0,0.2); transform: rotate(2deg); z-index: 3;">
                        <div style="padding: 1rem; display: flex; flex-direction: column; justify-content: space-between; height: 100%; color: white;">
                            <div style="font-size: 0.7rem; font-weight: 600; letter-spacing: 0.1em;">CAPITAL ONE</div>
                            <div style="font-size: 0.9rem; letter-spacing: 0.1em;">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4242</div>
                            <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                                <div style="font-size: 0.7rem;">VENTURE X</div>
                                <div style="display: flex; gap: 2px;">
                                    <div style="width: 14px; height: 14px; background: #EB001B; border-radius: 50%;"></div>
                                    <div style="width: 14px; height: 14px; background: #F79E1B; border-radius: 50%; margin-left: -6px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- View Full Strategy Link -->
            <div style="text-align: right; margin-top: 1rem;">
                <span style="color: #6366F1; font-weight: 600; font-size: 0.9rem;">View Full Strategy ‚Üí</span>
            </div>
        </a>
        {% empty %}
        <!-- Empty State -->
        <div style="text-align: center; padding: 4rem 2rem;">
            <div style="font-size: 4rem; margin-bottom: 1.5rem; opacity: 0.3;">üí≥</div>
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.75rem;">No personalities yet</h2>
            <p style="color: var(--text-muted);">Check back soon!</p>
        </div>
        {% endfor %}
    </div>

    <!-- No Results State (Hidden by default) -->
    <div id="no-results" style="display: none; text-align: center; padding: 4rem 0;">
        <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
        <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">No personalities found</h3>
        <p style="color: var(--text-muted); margin-bottom: 1.5rem;">Try adjusting your search terms or take the quiz to
            find your match.</p>
        <a href="{% url 'quiz' %}" class="btn btn-primary">Take the Quiz</a>
    </div>
</section>

<script>
    document.getElementById('personality-search').addEventListener('input', function (e) {
        const searchTerm = e.target.value.toLowerCase();
        const cards = document.querySelectorAll('.personality-card-link');
        let hasVisible = false;

        cards.forEach(card => {
            const name = card.dataset.name;
            const desc = card.dataset.desc;
            const tag = card.dataset.tag;

            if (name.includes(searchTerm) || desc.includes(searchTerm) || tag.includes(searchTerm)) {
                card.style.display = 'block';
                hasVisible = true;
            } else {
                card.style.display = 'none';
            }
        });

        const noResults = document.getElementById('no-results');
        const grid = document.getElementById('personalities-grid');

        if (!hasVisible && cards.length > 0) {
            noResults.style.display = 'block';
            grid.style.display = 'none';
        } else {
            noResults.style.display = 'none';
            grid.style.display = 'grid';
        }
    });
</script>

<style>
    .personality-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.1) !important;
    }
</style>
{% endblock %}