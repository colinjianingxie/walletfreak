{% extends 'base.html' %}
{% load static %}

{% block breadcrumb_section %}Analysis{% endblock %}

{% block main_style %}padding: 0; background: #F7F7F7; min-height: calc(100vh - 70px);{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/personality_list.css' %}">
<style>
    .assigned-personality-grid {
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: 2rem;
        align-items: center;
    }
    @media (max-width: 768px) {
        .assigned-personality-grid {
            grid-template-columns: 1fr;
            text-align: center;
            gap: 1.5rem;
        }
        .assigned-personality-grid > div:first-child { /* Icon */
            margin: 0 auto;
        }
        .assigned-personality-grid > a { /* Button */
            width: 100%;
            justify-content: center;
        }
    }
    /* Critical fixes for layout stability */
    .assigned-personality-card {
        overflow: hidden;
        position: relative;
        background: linear-gradient(135deg, #F5F3FF 0%, #EDE9FE 100%);
        border-radius: 20px;
        padding: 2rem;
        border: 1px solid #E9D5FF;
    }
    .assigned-icon-box {
        width: 80px;
        height: 80px;
        flex-shrink: 0;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        box-shadow: 0 8px 16px rgba(168, 85, 247, 0.3);
        overflow: hidden; /* Prevent large images from escaping */
    }
    .assigned-icon-img {
        width: 65%;
        height: 65%;
        object-fit: contain;
    }
</style>
{% endblock %}

{% block content %}

<!-- Personalities Header with Quiz -->
{% include 'cards/includes/personality_list/quiz_hero.html' %}

<!-- User's Assigned Personality (if exists) -->
{% include 'cards/includes/personality_list/assigned_personality.html' %}

<!-- Personalities Grid -->
{% include 'cards/includes/personality_list/personalities_carousel.html' %}



<script>
    // Personalities data for quiz
    const PERSONALITY_IMAGES_PATH = "{% static 'images/personalities/' %}";
    const personalities = {{ personalities_json|safe }};
    const questions = {{ questions_json|safe }};
</script>
<script src="{% static 'js/personality_list.js' %}"></script>
{% endblock %}