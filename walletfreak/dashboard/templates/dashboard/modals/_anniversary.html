<style>
/* Default Desktop Styles */
.anniversary-desktop-default {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    overflow-y: auto;
    align-items: center;
    justify-content: center;
}

.anniversary-content-default {
    max-width: 450px;
    width: 90%;
    margin: 2rem auto;
    background: white;
    border-radius: 16px; /* Desktop only */
    padding: 2rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    max-height: 90vh; /* Ensure it fits on desktop */
}

.anniversary-header-default {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    flex-shrink: 0;
}

.anniversary-body-default {
    flex: 1;
    overflow-y: auto;
    padding-right: 4px;
    padding-bottom: 2rem; /* Desktop padding */
}

.anniversary-footer-default {
    display: flex;
    gap: 0.75rem;
    flex-shrink: 0;
}

/* Mobile Responsive Styles for Anniversary Modal */
@media screen and (max-width: 1024px) {
    #anniversary-modal * {
        box-sizing: border-box !important;
    }

    #anniversary-modal {
        align-items: flex-start !important;
        padding: 0 !important;
    }

    #anniversary-modal .modal-content {
        margin: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        height: 100vh !important;
        height: 100dvh !important;
        max-height: 100dvh !important;
        border-radius: 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
    }

    /* Header Override */
    #anniversary-modal .anniversary-header-default {
        padding: 1.5rem 1.5rem 1rem 1.5rem !important;
        margin-bottom: 0 !important;
        border-bottom: 1px solid #E2E8F0;
    }

    #anniversary-modal .modal-header h3 {
        font-size: 1.25rem !important;
    }
    
    #anniversary-modal .modal-close {
        padding: 0.5rem;
    }

    /* Body Override */
    #anniversary-modal .anniversary-body-default {
        padding: 1.5rem !important;
        padding-bottom: 6rem !important; /* Ensure space for sticky footer if needed, or simply let it flow */
        
        /* Actually, since we use flex column layout, we don't need huge bottom padding if the footer is not absolute absolute but flex item. */
        /* Let's reset it to normal padding */
        padding-bottom: 1.5rem !important; 
    }

    /* Footer Override */
    #anniversary-modal .anniversary-footer-default {
        background: white;
        padding: 1rem !important;
        border-top: 1px solid #E2E8F0;
        margin-top: auto; /* Push to bottom if content is short */
        
        padding-bottom: max(0.5rem, env(safe-area-inset-bottom)) !important;
    }

    #anniversary-modal .anniversary-footer-default button {
        font-size: 0.9375rem !important;
    }
}
</style>
<!-- Anniversary Date Modal -->
<div id="anniversary-modal" class="modal anniversary-desktop-default">
    <div class="modal-content anniversary-content-default">
        <div class="modal-header anniversary-header-default">
            <div>
                <h3 style="font-size: 1.5rem; font-weight: 700; margin: 0 0 0.5rem 0;">Set Card Anniversary</h3>
                <p style="color: #64748B; margin: 0; font-size: 0.875rem;">When did you get this card?</p>
            </div>
            <button class="modal-close" onclick="closeAnniversaryModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #94A3B8;">Ã—</button>
        </div>

        <!-- Scrollable Content -->
        <div class="anniversary-body-default">
            <!-- Card Info -->
            <div style="background: #F9FAFB; border-radius: 12px; padding: 1.25rem; margin-bottom: 1.5rem;">
                <div style="font-size: 0.75rem; font-weight: 700; color: #64748B; letter-spacing: 0.05em; text-transform: uppercase; margin-bottom: 0.5rem;">CARD</div>
                <div id="anniversary-card-name" style="font-weight: 700; font-size: 1.125rem; color: #1F2937;">Loading...</div>
            </div>

            <!-- Date Input -->
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #1F2937;">Anniversary Date</label>
                <div style="font-size: 0.75rem; color: #64748B; margin-bottom: 0.5rem;">Best estimate if cannot find. The more accurate the anniversary, the better the tracking. <span style="display: flex; align-items: center; margin-top: 4px; color: #4B5563;"><span class="material-icons" style="font-size: 16px; margin-right: 4px; color: #F59E0B;">lightbulb</span>You can find your anniversary date by your earliest statement.</span></div>
                
                <input type="date" id="anniversary-date-input" 
                       style="width: 100%; padding: 0.875rem 1rem; border: 2px solid #E5E7EB; border-radius: 10px; font-size: 1rem; font-weight: 600;">

                <div id="anniversary-default-display" style="display: none; align-items: center; gap: 0.5rem; padding: 0.75rem 1rem; background: #F3F4F6; border-radius: 8px; border: 1px dashed #9CA3AF; margin-top: 0.5rem;">
                    <span class="material-icons" style="color: #6B7280;">event_busy</span>
                    <span style="flex: 1; font-weight: 500; color: #374151;">Default (<span id="anniversary-default-date-display-text">1/1/....</span>)</span>
                    <button onclick="clearAnniversaryDefaultState()" style="background: none; border: none; cursor: pointer; color: #6B7280; display: flex; align-items: center;" title="Clear Default">
                        <span class="material-icons" style="font-size: 18px;">close</span>
                    </button>
                </div>
                
                <!-- "I don't know" Button -->
                <button id="btn-unknown-add-anniversary" type="button" onclick="setAnniversaryDefaultState()" style="margin-top: 0.75rem; background: none; border: none; color: #6366F1; font-size: 0.875rem; font-weight: 500; cursor: pointer; padding: 0; display: flex; align-items: center; gap: 0.25rem;">
                    I don't know my Anniversary
                </button>

                <p style="color: #64748B; font-size: 0.875rem; margin-top: 0.5rem;">This helps track which months/quarters are available for benefit tracking.</p>
            </div>

            <!-- Example -->
            <div style="background: #FEF3C7; border-left: 4px solid #F59E0B; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <div style="font-weight: 600; color: #92400E; margin-bottom: 0.25rem; font-size: 0.875rem;">ðŸ’¡ Example</div>
                <div style="color: #78350F; font-size: 0.875rem;">If you got your card in October 2025, months before October will be grayed out.</div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="anniversary-footer-default">
            <button onclick="closeAnniversaryModal()" style="flex: 1; background: #F3F4F6; color: #64748B; border: none; padding: 0.875rem; border-radius: 10px; font-weight: 600; cursor: pointer;">
                Cancel
            </button>
            <button onclick="saveAnniversaryDate()" style="flex: 1; background: #7C3AED; color: white; border: none; padding: 0.875rem; border-radius: 10px; font-weight: 600; cursor: pointer;">
                Save Anniversary
            </button>
        </div>
    </div>
</div>
